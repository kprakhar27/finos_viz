<!--
   
   Copyright (c) 2017, the Perspective Authors.
   
   This file is part of the Perspective library, distributed under the terms of
   the Apache License 2.0.  The full license can be found in the LICENSE file.

-->
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <script src="/node_modules/perspective-viewer/dist/umd/perspective-viewer.js"></script>
    <script
        src="/node_modules/perspective-viewer-datagrid/dist/umd/perspective-viewer-datagrid.js">
    </script>
    <script src="/node_modules/perspective-viewer-d3fc/dist/umd/perspective-viewer-d3fc.js">
    </script>
    <script src="/node_modules/perspective/dist/umd/perspective.js"></script>
    <link rel='stylesheet' href="/node_modules/perspective-viewer/dist/umd/material-dense.css">
    <style>
        perspective-viewer {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
    </script>
    <style>
        .nav-link,
        .navbar-brand {
            color: #000000 !important;
            font-size: 14px !important;
            padding: 13px 10px 5px !important;
            margin-left: 18px !important;
            margin-right: 17.5px !important;
            font-family: sans-serif !important;
            font-family: 'Fredoka One', cursive !important;
        }

        .navbar-brand {
            font-size: 18px !important;
            padding: 13px 15px 15px !important;
            margin-left: 0px !important;
        }

        .titleViewer {
            font: initial;
            font-family: Arial;
            margin-top: 50px;
            margin-bottom: 48px;
            position: relative;
            display: inline-block;
            width: 80%;
            height: 600px;
            text-align: initial;
            vertical-align: center;
            max-width: 1000px;
            border: none;
            word-wrap: normal;
            margin-left: 10%;
        }
    </style>
    <title>Analytics App</title>
</head>
<body>
    <nav class="navbar navbar-expand-lg" style="background-color: white !important; padding: 0 !important">
        <div class="container-fluid" style="background-color: white !important; padding: 0 !important">
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="navbar-brand" href="https://analytics-alpha-byinterns.truefeedback.io/">Analytics App</a>
                    <a class="nav-link" href="https://analytics-alpha-byinterns.truefeedback.io/">Home</a>
                    <a class="nav-link" href="https://analytics-alpha-byinterns.truefeedback.io/apps/app6">Visualization</a>
                    <a class="nav-link" href="https://analytics-alpha-byinterns.truefeedback.io/assets/searchTermsColor.html">Natural Language Processing</a>
                    <a class="nav-link" href="https://analytics-alpha-byinterns.truefeedback.io/apps/dask_dash_app3/app_sm">Statistical Models</a>
                    <a class="nav-link" href="#">Survey Streams</a>
                </div>
            </div>
        </div>
    </nav>
    <script>
        window.addEventListener('DOMContentLoaded', async function () {
            const viewer = document.getElementById('viewer');
            // Create a client that expects a Perspective server to accept
            // Websocket connections at the specified URL.
            const websocket = perspective.websocket("ws://" + location.hostname + ":8888/websocket");
            alert("ws://" + location.hostname + ":8888/websocket");
            /* This shows Perspective running in "server mode": the `table`
            variable is a proxy for the `Table` we created on the server.
            
            All operations that are possible through the Javascript API are
            possible on the Python API as well, thus calling `view()`,
            `schema()`, `update()` etc on `const table` will pass those
            operations to the Python `Table`, execute the commands,
            and return the result back to Javascript.
            */
            const table = websocket.open_table('data_source_one');
            // Load this in the `<perspective-viewer>`.
            viewer.load(table);
            viewer.toggleConfig();
        });
    </script>
    <h1 class="display-5 text-center" style="font-family : 'Fredoka One', cursive; margin-top: 20px;">Survey Streams</h1>
    <perspective-viewer class="titleViewer" id="viewer" plugin="Y Bar" aggregates='{answerCount: "value"}' row-pivots='[]' column-pivots='[]'></perspective-viewer>
    </perspective-viewer>
    <!-- {
        plugin: "Y Line",
        "row-pivots": ["lastUpdate"],
        "column-pivots": [],
        sort: [["lastUpdate", "desc"]],
        "column-pivots": ["client"],
        columns: ["bid"],
        aggregates: {
            bid: "avg",
            chg: "avg",
            name: "last"
        }
    } -->
    
</body>
</html>